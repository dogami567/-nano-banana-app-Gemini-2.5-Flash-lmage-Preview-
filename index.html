<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana - GeminiåŒå›¾åˆæˆå·¥å…·</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸŒ Nano Banana</h1>
            <p>åŸºäº Gemini 2.5 Flash Image çš„åŒå›¾åˆæˆå·¥å…·</p>
        </header>

        <main>
            <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
            <section class="upload-section">
                <div class="upload-container">
                    <div class="upload-box" id="leftImageBox">
                        <div class="upload-area" ondrop="handleDrop(event, 'left')" ondragover="handleDragOver(event)">
                            <input type="file" id="leftImageInput" accept="image/*" onchange="handleImageUpload(event, 'left')" hidden>
                            <div class="upload-placeholder">
                                <span class="upload-icon">ğŸ“</span>
                                <p>æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ å·¦å›¾</p>
                                <button type="button" onclick="document.getElementById('leftImageInput').click()">é€‰æ‹©æ–‡ä»¶</button>
                            </div>
                            <img id="leftImagePreview" class="image-preview" style="display: none;" alt="å·¦å›¾é¢„è§ˆ">
                        </div>
                        <label class="image-label">å·¦å›¾ï¼ˆå›¾æ¡ˆ/çº¹ç†ï¼‰</label>
                    </div>

                    <div class="upload-box" id="rightImageBox">
                        <div class="upload-area" ondrop="handleDrop(event, 'right')" ondragover="handleDragOver(event)">
                            <input type="file" id="rightImageInput" accept="image/*" onchange="handleImageUpload(event, 'right')" hidden>
                            <div class="upload-placeholder">
                                <span class="upload-icon">ğŸ“</span>
                                <p>æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ å³å›¾</p>
                                <button type="button" onclick="document.getElementById('rightImageInput').click()">é€‰æ‹©æ–‡ä»¶</button>
                            </div>
                            <img id="rightImagePreview" class="image-preview" style="display: none;" alt="å³å›¾é¢„è§ˆ">
                        </div>
                        <label class="image-label">å³å›¾ï¼ˆä¸»ä½“/æ¨¡ç‰¹ï¼‰</label>
                    </div>
                </div>
            </section>

            <!-- APIé…ç½®åŒºåŸŸ -->
            <section class="config-section">
                <h3>ğŸ”§ APIé…ç½®</h3>
                <div class="config-container">
                    <div class="config-row">
                        <label for="apiKey">API Key:</label>
                        <input type="password" id="apiKey" placeholder="è¾“å…¥Gemini API Key" class="config-input">
                    </div>
                    
                    <div class="config-row">
                        <label for="modelSelect">æ¨¡å‹:</label>
                        <select id="modelSelect" class="config-select">
                            <option value="gemini-2.5-flash-image-preview">gemini-2.5-flash-image-preview</option>
                            <option value="gemini-2.0-flash">gemini-2.0-flash</option>
                        </select>
                        <button id="refreshModelsBtn" class="refresh-btn" onclick="refreshModels()">ğŸ”„ åˆ·æ–°</button>
                    </div>
                </div>
            </section>

            <!-- Promptè¾“å…¥åŒºåŸŸ -->
            <section class="prompt-section">
                <h3>âœï¸ æç¤ºè¯</h3>
                <textarea id="promptInput" placeholder="è¾“å…¥åˆæˆæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼šå°†å·¦å›¾çš„å›¾æ¡ˆåº”ç”¨åˆ°å³å›¾çš„è¡£æœä¸Šï¼Œä¿æŒäººç‰©ä¸å˜..." 
                         class="prompt-textarea"></textarea>
            </section>

            <!-- ç”ŸæˆæŒ‰é’® -->
            <section class="generate-section">
                <button id="generateBtn" class="generate-btn" onclick="generateImage()" disabled>
                    ğŸš€ å¼€å§‹ç”Ÿæˆ
                </button>
            </section>

            <!-- è¿›åº¦æ˜¾ç¤ºåŒºåŸŸ -->
            <section class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">å‡†å¤‡ä¸­...</p>
                </div>
            </section>

            <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
            <section class="result-section" id="resultSection" style="display: none;">
                <h3>âœ¨ ç”Ÿæˆç»“æœ</h3>
                <div class="result-container">
                    <img id="resultImage" class="result-image" alt="ç”Ÿæˆç»“æœ">
                    <div class="result-actions">
                        <button class="action-btn" onclick="saveImage()">ğŸ’¾ ä¿å­˜å›¾ç‰‡</button>
                        <button class="action-btn" onclick="copyImage()">ğŸ“‹ å¤åˆ¶å›¾ç‰‡</button>
                        <button class="action-btn" onclick="resetApp()">ğŸ”„ é‡æ–°å¼€å§‹</button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Powered by Gemini 2.5 Flash Image API</p>
        </footer>
    </div>

    <script src="utils.js"></script>
    <script src="api.js"></script>
    <script src="script.js"></script>
</body>
</html>